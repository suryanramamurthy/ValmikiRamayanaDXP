{"version":3,"file":"index.es.js","sources":["../src/helper/string-utils.ts","../src/Models/metadata-model.ts","../src/embedded-types/style-type.ts","../src/helper/html-to-json.ts","../src/extensions/index.ts","../src/helper/sanitize.ts","../src/options/default-options.ts","../src/helper/find-embeded-object.ts","../src/helper/find-render-content.ts","../src/render-embedded-objects.ts","../src/nodes/node-type.ts","../src/nodes/mark-type.ts","../src/nodes/node.ts","../src/nodes/document.ts","../src/nodes/text-node.ts","../src/options/default-node-options.ts","../src/helper/enumerate-entries.ts","../src/json-to-html.ts","../src/gql.ts","../src/entry-editable.ts","../src/updateAssetURLForGQL.ts","../src/endpoints.ts"],"sourcesContent":["export function replaceHtmlEntities(text: string): string {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;');\n}\n\nexport const forbiddenAttrChars = ['\"', \"'\", '>','<', '/', '='];\n","import StyleType from '../embedded-types/style-type';\nimport TextNode from '../nodes/text-node';\nimport { replaceHtmlEntities, forbiddenAttrChars } from '../helper/string-utils';\n\nexport interface Metadata {\n  text: string;\n  attributes: Attributes;\n\n  itemUid: string | undefined;\n  itemType: 'entry' | 'asset' | undefined;\n  styleType: StyleType | undefined;\n  contentTypeUid: string | undefined;\n}\n\nexport interface Attributes {\n  type?: 'entry' | 'asset';\n  class?: string;\n  id?: string;\n  [key: string]: any;\n  style?: styleObjType | string;\n  'sys-style-type'?: string;\n}\nexport type styleObjType = { [key: string]: any };\n\nexport interface EntryAttributes extends Attributes {\n  'data-sys-entry-uid': string;\n  'data-sys-entry-local': string;\n  'data-sys-content-type-uid': string;\n}\n\nexport interface AssetAttributes extends Attributes {\n  'data-sys-asset-uid': string;\n  'data-sys-asset-filelink': string;\n  'data-sys-asset-contenttype': string;\n}\n\nexport function createMetadata(attribute: Attributes): Metadata {\n  return {\n    text: attribute['#text'],\n    itemUid: attribute['data-sys-entry-uid'] || attribute['data-sys-asset-uid'],\n    itemType: attribute.type,\n    styleType: attribute['sys-style-type'] as StyleType,\n    attributes: attribute,\n    contentTypeUid: attribute['data-sys-content-type-uid'],\n  };\n}\n\nexport function nodeToMetadata(attribute: Attributes, textNode: TextNode): Metadata {\n  return {\n    text: textNode.text,\n    itemUid: attribute['entry-uid'] || attribute['asset-uid'],\n    itemType: attribute.type,\n    styleType: attribute['display-type'] as StyleType,\n    attributes: attribute,\n    contentTypeUid: attribute['content-type-uid'],\n  };\n}\n\nexport function attributeToString(attributes: Attributes): string {\n  let result = '';\n  for (const key in attributes) {\n    if (Object.prototype.hasOwnProperty.call(attributes, key)) {\n      if (forbiddenAttrChars.some(char => key.includes(char))) {\n        continue;\n      }\n      let value = attributes[key];\n      if (Array.isArray(value)) {\n        value = value.join(', ');\n      } else if (typeof value === 'object') {\n        let elementString = '';\n        for (const subKey in value) {\n          if (Object.prototype.hasOwnProperty.call(value, subKey)) {\n            const subValue = value[subKey];\n            if (subValue != null && subValue !== '') {\n              elementString += `${subKey}:${subValue}; `;\n            }\n          }\n        }\n        value = elementString;\n      }\n      result += ` ${key}=\"${replaceHtmlEntities(String(value))}\"`;\n    }\n  }\n  return result;\n}\n","enum StyleType {\n  BLOCK = 'block',\n  INLINE = 'inline',\n  LINK = 'link',\n  DISPLAY = 'display',\n  DOWNLOAD = 'download'\n}\n\nexport default StyleType;\n","\nexport function elementToJson(element: Element): object {\n  let obj: any = { }\n  for (let i = 0; i<element.attributes.length; i++) {\n    obj[element.attributes.item(i).name] = element.attributes.item(i).value\n  }\n  \n  element.childNodes.forEach((chileNode) => {\n    const node: ChildNode = (chileNode)\n    obj = {\n      ...obj,\n      ...parseElement(node)\n    }\n  })\n  return obj\n}\n\nfunction parseElement(node: ChildNode): any {\n  const obj: any = {}\n  if (node.nodeType === 3) {\n    obj['#text'] = node.textContent;\n  }else if (node.nodeType === 1) {\n    obj[node.nodeName.toLowerCase()] = elementToJson(node as Element)\n  }\n  return obj\n}","import { elementToJson } from '../helper/html-to-json';\nimport { Metadata, createMetadata, Attributes } from '../Models/metadata-model';\nconst frameflag = 'documentfragmentcontainer';\n\ndeclare global {\n  interface String {\n    forEachEmbeddedItem(callbackfn: (embededObjectTag: string, object: Metadata) => void): void;\n  }\n}\n\nString.prototype.forEachEmbeddedItem = function (\n  callbackfn: (embededObjectTag: string, object: Metadata) => void,\n): void {\n\n  const str = `<${frameflag}>${this.toString()}</${frameflag}>`;\n  const root = (new DOMParser()).parseFromString(str, 'text/html')\n  const embeddedEntries = root.querySelectorAll(\".embedded-entry\")\n  \n  embeddedEntries.forEach((element) => {    \n    callbackfn(element.outerHTML, createMetadata(elementToJson(element) as Attributes))\n  })\n  const embeddedAsset = root.querySelectorAll(\".embedded-asset\")\n  embeddedAsset.forEach((element) => {\n    callbackfn(element.outerHTML, createMetadata(elementToJson(element) as Attributes))\n  })\n};\n","\ntype AllowedTags = 'p' | 'a' | 'strong' | 'em' | 'ul' | 'ol' | 'li' | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' | 'sub' | 'u' | 'table' | 'thead' | 'tbody' | 'tr' | 'th' | 'td' | 'span' | 'fragment' | 'strike' | 'sup' | 'br'| 'img' | 'colgroup' | 'col' | 'div';\ntype AllowedAttributes = 'href' | 'title' | 'target' | 'alt' | 'src' | 'class' | 'id' | 'style' | 'colspan' | 'rowspan' | 'content-type-uid' | 'data-sys-asset-uid' | 'sys-style-type' | 'data-type' | 'data-width' | 'data-rows' | 'data-cols' | 'data-mtec';\n\nexport function sanitizeHTML(input: string, allowedTags: AllowedTags[] = ['p', 'a', 'strong', 'em', 'ul', 'ol', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'sub', 'u', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'span', 'fragment', 'sup', 'strike', 'br', 'img', 'colgroup', 'col', 'div'], allowedAttributes: AllowedAttributes[] = ['href', 'title', 'target', 'alt', 'src', 'class', 'id', 'style', 'colspan', 'rowspan', 'content-type-uid', 'data-sys-asset-uid', 'sys-style-type', 'data-type', 'data-width', 'data-rows', 'data-cols', 'data-mtec']): string {\n    \n    // Replace newline characters with <br /> before processing the HTML tags\n    input = input.replace(/\\n/g, '<br />');\n\n    // Regular expression to find and remove all HTML tags except the allowed ones\n    const sanitized = input.replace(/<\\/?([a-z][a-z0-9]*)\\b[^<>]*>/gi, (match, tag) => {\n        return allowedTags.includes(tag.toLowerCase()) ? match : '';\n    });\n\n    // Regular expression to remove all attributes except the allowed ones\n    const cleaned = sanitized.replace(/<([a-z][a-z0-9]*)\\b[^<>]*>/gi, (match, tag) => {\n        if (!allowedTags.includes(tag.toLowerCase())) {\n            return match; // Ignore tags not in allowedTags\n        }\n        // For each tag that is allowed, clean its attributes\n        return match.replace(/\\s([a-z\\-]+)=['\"][^'\"]*['\"]/gi, (attributeMatch, attribute) => {\n            return allowedAttributes.includes(attribute.toLowerCase()) ? attributeMatch : '';\n        });\n    });\n    return cleaned;\n}","import StyleType from '../embedded-types/style-type';\nimport { RenderOption } from '.';\nimport { Metadata } from '../Models/metadata-model';\nimport { EmbeddedItem } from '../Models/embedded-object';\nimport { EntryNode } from '../Models/json-rte-model';\nimport { sanitizeHTML } from '../helper/sanitize'\n\nexport const defaultOptions: RenderOption = {\n  [StyleType.BLOCK]: (item: EmbeddedItem | EntryNode) => {\n    const title = sanitizeHTML(item.title || item.uid);\n    const content_type_uid = sanitizeHTML(item._content_type_uid || (item.system ? item.system.content_type_uid : ''));\n    return `<div><p>${title}</p><p>Content type: <span>${content_type_uid}</span></p></div>`;\n  },\n  [StyleType.INLINE]: (item: EmbeddedItem | EntryNode) => {\n    const title = sanitizeHTML(item.title || item.uid);\n    return `<span>${title}</span>`;\n  },\n  [StyleType.LINK]: (item: EmbeddedItem | EntryNode, metadata: Metadata) => {\n    const url = item.url ? encodeURI(sanitizeHTML(item.url)) : null;\n    const text = sanitizeHTML(metadata.text || item.title || item.uid || (item.system ? item.system.uid : ''));\n    const hrefAttr = url ? ` href=\"${url}\"` : '';\n    return `<a${hrefAttr}>${text}</a>`;\n  },\n  [StyleType.DISPLAY]: (item: EmbeddedItem | EntryNode, metadata: Metadata) => {\n    const url = item.url ? encodeURI(sanitizeHTML(item.url)) : null;\n    const alt = sanitizeHTML(metadata.attributes.alt || item.title || item.filename || item.uid\n      || (item.system ? item.system.uid : ''));\n    const srcAttr = url ? ` src=\"${url}\"` : '';\n    return `<img${srcAttr} alt=\"${alt}\" />`;\n  },\n  [StyleType.DOWNLOAD]: (item: EmbeddedItem | EntryNode, metadata: Metadata) => {\n    const href = item.url ? encodeURI(sanitizeHTML(item.url)) : null;\n    const text = sanitizeHTML(metadata.text || item.title || item.uid || (item.system ? item.system.content_type_uid : ''));\n    const hrefAttr = href ? ` href=\"${href}\"` : '';\n    return `<a${hrefAttr}>${text}</a>`;\n  },\n};\n","import { defaultOptions } from '../options/default-options';\nimport { EntryEmbedable, EmbeddedItem } from '../Models/embedded-object';\nimport { RenderOption, RenderContentType, RenderItem } from '../options/index';\nimport { EntryAttributes, Metadata } from '../Models/metadata-model';\nimport { EntryNode } from '../Models/json-rte-model';\n\n// This function will find Embedded object present in string\nexport function findEmbeddedEntry(\n  uid: string,\n  contentTypeUid: string,\n  embeddeditems: (EmbeddedItem| EntryNode)[] = [],\n): (EmbeddedItem | EntryNode)[] {\n  return embeddeditems.filter((entry: any) => {\n    if (!entry) return false;\n    return (\n      (entry.uid && (entry as EmbeddedItem).uid === uid && (entry as EmbeddedItem)._content_type_uid === contentTypeUid) ||\n      (entry.system && (entry as EntryNode).system.uid === uid && (entry as EntryNode).system.content_type_uid === contentTypeUid)\n    );\n  });\n}\n\nexport function findEmbeddedAsset(uid: string, embeddedAssets: (EmbeddedItem| EntryNode)[] = []): (EmbeddedItem| EntryNode)[] {\n  return embeddedAssets.filter((asset: any) => {\n    if (!asset) return false;\n    return (\n      (asset.uid && (asset as EmbeddedItem).uid === uid) ||\n      (asset.system && (asset as EntryNode).system.uid === uid)\n    );\n  });\n}\n\nexport function findGQLEmbeddedItems(metadata: Metadata, items: (EmbeddedItem| EntryNode)[]): (EmbeddedItem| EntryNode)[] {\n  if (!metadata || !items) return [];\n  if (metadata.itemType === 'entry') {\n    return findEmbeddedEntry(\n        metadata.itemUid,\n        metadata.contentTypeUid,\n        items\n        );\n  } else {\n    return findEmbeddedAsset(\n        metadata.itemUid, \n        items\n        );\n  }\n}\n\nexport function findEmbeddedItems(object: Metadata, entry: EntryEmbedable): (EmbeddedItem| EntryNode)[] {\n  if (object && object !== undefined && entry && entry !== undefined) {\n    if (entry._embedded_items !== undefined) {\n      const entryEmbedable = entry\n      const items = Object.values(entryEmbedable._embedded_items || []).reduce((accumulator, value) => accumulator.concat(value), [])\n      return findGQLEmbeddedItems(object, items)\n    }\n  }\n  return [];\n}\n\nexport function findRenderString(\n  item: EmbeddedItem | EntryNode,\n  metadata: Metadata,\n  renderOptions?: RenderOption,\n): string {\n  if ((!item && item === undefined) || (!metadata && metadata === undefined)) {\n    return '';\n  }\n  \n  if (renderOptions && renderOptions[metadata.styleType] !== undefined) {\n    const renderFunction = renderOptions[metadata.styleType] as RenderItem;\n\n     if (\n      (metadata.attributes as EntryAttributes)['data-sys-content-type-uid'] !== undefined &&\n      typeof renderFunction !== 'function' &&\n      renderFunction[(metadata.attributes as EntryAttributes)['data-sys-content-type-uid']] !== undefined\n    ) {\n      return (renderFunction as RenderContentType)[(metadata.attributes as EntryAttributes)['data-sys-content-type-uid']](item, metadata);\n    } else if (\n      (metadata.attributes as EntryAttributes)['data-sys-content-type-uid'] !== undefined &&\n      typeof renderFunction !== 'function' &&\n      (renderFunction as RenderContentType).$default !== undefined\n    ) {\n      return (renderFunction as RenderContentType).$default(item, metadata);\n    } else if (\n      metadata.contentTypeUid !== undefined &&\n      typeof renderFunction !== 'function' &&\n      renderFunction[metadata.contentTypeUid] !== undefined\n    ) {\n      return (renderFunction as RenderContentType)[metadata.contentTypeUid](item, metadata)\n    } else if (\n      metadata.contentTypeUid !== undefined &&\n      typeof renderFunction !== 'function' &&\n      (renderFunction as RenderContentType).$default !== undefined\n    ) {\n      return (renderFunction as RenderContentType).$default(item, metadata);\n    }  else if (typeof renderFunction === 'function') {\n      return renderFunction(item, metadata);\n    }\n  }\n  const defaultRenderFunction = defaultOptions[metadata.styleType] as RenderItem;  \n  return defaultRenderFunction(item, metadata);\n}\n","import { EntryEmbedable } from '../Models/embedded-object';\nexport function findRenderContent<Type>(keyPaths: string, entry: EntryEmbedable, render: (content: Type) => (string| string[])){\n     getContent(keyPaths.split(\".\"), entry, render)\n}\n\nexport function getContent<Type>(keys: string[], object: any, render: (content: Type) => (string| string[])) {\n    if (keys) {\n        const key = keys[0]\n        if (keys.length === 1 && object[key]) {\n            object[key] = render(object[key])\n        } else if (keys.length > 0) {\n            if (object[key]) {\n                const newKeys = keys.slice(1)\n                if (Array.isArray(object[key])) {\n                    // tslint:disable-next-line: prefer-for-of\n                    for (const objKey of object[key]) {\n                        getContent(newKeys, objKey, render)\n                    }\n                } else if (typeof object[key] === 'object') {\n                    getContent(newKeys, object[key], render)\n                }\n            }\n        }\n    }\n}","import './extensions'\nimport { Option, RenderOption } from './options';\nimport { Metadata } from './Models/metadata-model';\nimport { findEmbeddedItems, findRenderString } from './helper/find-embeded-object';\nimport { EntryEmbedable } from './Models/embedded-object';\nimport { findRenderContent } from './helper/find-render-content';\n/**\n * \n * @param {EntryEmbedable| EntryEmbedable[]} entry - Objects that contains RTE with embedded objects\n * @param {string[]} paths - Key paths for RTE contents in Entry object\n * @param {RenderOption?} renderOption -  Optional render options to render content\n */\nexport function render(option: { \n    entry: EntryEmbedable| EntryEmbedable[],\n    renderOption?: RenderOption,\n    paths?: string[]\n}) {\n\n    function findContent(path: string, entry: EntryEmbedable) {\n        findRenderContent(path, entry, (content: string| string[]) => {\n            return renderContent(content, { entry, renderOption: option.renderOption })\n        })\n    }\n\n    function findAndRender (entry: EntryEmbedable) {\n        if (!option.paths || option.paths.length === 0) {\n            Object.keys({ \n                ...entry._embedded_items,\n            }).forEach((path) => {\n                findContent(path, entry)\n            })\n        } else {\n            option.paths.forEach((path) => {\n                findContent(path, entry)\n            })\n        }\n    }\n\n    if (option.entry instanceof Array) {\n        option.entry.forEach((entry) => {\n            findAndRender(entry)\n        })\n    }else {\n        findAndRender(option.entry)\n    }\n}\n\n/**\n * \n * @param {string | string[]} content - RTE content to render \n * @param {EntryEmbedable} options.entry - Entry object containing embedded objects\n * @param {RenderOption?} options.renderOption - Optional render options to render content\n */\nexport function renderContent(content: (string | string[]), option: Option): (string| string[]) {\n    // return blank if content not present\n    if (!content || content === undefined) {\n        return ''\n    }\n\n    // render content of type string\n    if (typeof content === 'string') {\n        let contentToReplace = content\n        content.forEachEmbeddedItem((embededObjectTag: string, object: Metadata) => {\n            contentToReplace = findAndReplaceEmbeddedItem(\n                contentToReplace,\n                embededObjectTag, \n                object, \n                option)\n        })\n        return contentToReplace\n    }\n\n    // render content of type array of string\n    const resultContent: string[] = []\n    content.forEach((element) => {\n        resultContent.push(renderContent(element, option) as string)\n    })\n    return resultContent\n}\n\nfunction findAndReplaceEmbeddedItem(content:string, embededObjectTag: string, metadata: Metadata, option: Option): string {    \n    const embeddedObjects = findEmbeddedItems(metadata, option.entry)\n    const renderString = findRenderString(embeddedObjects[0], metadata, option.renderOption)\n    return content.replace(embededObjectTag, renderString)\n}\n","enum NodeType {\n    DOCUMENT = 'doc',\n    PARAGRAPH = 'p',\n    \n    LINK = 'a',\n    IMAGE = 'img',\n    EMBED = 'embed',\n\n    HEADING_1 = 'h1',\n    HEADING_2 = 'h2',\n    HEADING_3 = 'h3',\n    HEADING_4 = 'h4',\n    HEADING_5 = 'h5',\n    HEADING_6 = 'h6',\n  \n    ORDER_LIST = 'ol',\n    UNORDER_LIST = 'ul',\n    LIST_ITEM = 'li',\n    FRAGMENT = 'fragment',\n  \n    HR = 'hr',\n\n    TABLE = 'table',\n    TABLE_HEADER = 'thead',\n    TABLE_BODY = 'tbody',\n    TABLE_FOOTER = 'tfoot',\n    TABLE_ROW = 'tr',\n    TABLE_HEAD = 'th',\n    TABLE_DATA = 'td',\n    COL_GROUP = 'colgroup',\n    COL = 'col',\n\n    BLOCK_QUOTE = 'blockquote',\n    CODE = 'code',\n\n    TEXT = 'text',\n    REFERENCE = 'reference'\n}\n\nexport default NodeType;","enum MarkType {\n    BOLD = 'bold',\n    ITALIC = 'italic',\n    UNDERLINE = 'underline',\n    CLASSNAME_OR_ID = 'classnameOrId',\n\n    STRIKE_THROUGH = 'strikethrough',\n    INLINE_CODE = 'inlineCode',\n\n\n    SUBSCRIPT = 'subscript',\n    SUPERSCRIPT = 'superscript',\n    BREAK = 'break'\n}\n\nexport default MarkType","import { AnyNode } from \"../json-to-html\"\nimport { Attributes } from \"../Models/metadata-model\"\nimport NodeType from \"./node-type\"\n\nexport default class Node {\n    type: NodeType\n    attrs: Attributes\n    children: AnyNode[]\n}","import Node from \"./node\"\nimport NodeType from \"./node-type\"\n\nexport default class Document extends Node {\n    type: NodeType.DOCUMENT\n\n    constructor() {\n        super()\n        this.type = NodeType.DOCUMENT\n    }\n}","import Node from \"./node\"\n\nexport default class TextNode extends Node {\n    bold?: boolean\n    italic?: boolean\n    underline?: boolean\n    strikethrough?: boolean\n    inlineCode?: boolean\n    superscript?: boolean\n    subscript?: boolean\n    break?: boolean\n    classname?: string\n    id?: string\n\n    text: string\n\n    constructor(text: string) {\n        super()\n        this.text = text\n    }\n}\n","import { Next, RenderOption } from \".\";\nimport MarkType from \"../nodes/mark-type\";\nimport Node from \"../nodes/node\";\nimport NodeType from \"../nodes/node-type\";\nimport { sanitizeHTML } from \"../helper/sanitize\";\n\n/**\n * Safely gets an attribute value from node.attrs\n */\nfunction getAttr(node: Node, key: string): unknown {\n    return node.attrs?.[key];\n}\n\n/**\n * Safely gets a string attribute value from node.attrs\n */\nfunction getAttrString(node: Node, key: string): string | undefined {\n    const value = node.attrs?.[key];\n    return typeof value === 'string' ? value : undefined;\n}\n\n/**\n * Builds common HTML attributes string (style, class-name, id)\n */\nfunction buildCommonAttrs(node: Node): string {\n    if (!node.attrs) return '';\n    \n    const attrs: string[] = [];\n    if (node.attrs.style) {\n        attrs.push(` style=\"${node.attrs.style}\"`);\n    }\n    if (node.attrs['class-name']) {\n        attrs.push(` class=\"${node.attrs['class-name']}\"`);\n    }\n    if (node.attrs.id) {\n        attrs.push(` id=\"${node.attrs.id}\"`);\n    }\n    return attrs.join('');\n}\n\nexport const defaultNodeOption: RenderOption = {\n    [NodeType.DOCUMENT]:() => {\n        return ``\n    },\n    [NodeType.PARAGRAPH]:(node: Node, next: Next) => {\n        return `<p${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</p>`\n    },\n    [NodeType.LINK]:(node: Node, next: Next) => {\n        const href = getAttrString(node, 'href') || getAttrString(node, 'url') || '';\n        const sanitizedHref = sanitizeHTML(href);\n        const target = getAttrString(node, 'target');\n        const targetAttr = target ? ` target=\"${target}\"` : '';\n        return `<a${buildCommonAttrs(node)}${sanitizedHref ? ` href=\"${sanitizedHref}\"` : ''}${targetAttr}>${sanitizeHTML(next(node.children))}</a>`\n    },\n    [NodeType.IMAGE]:(node: Node, next: Next) => {\n        const src = getAttrString(node, 'src') || getAttrString(node, 'url');\n        const sanitizedSrc = src ? encodeURI(sanitizeHTML(src)) : '';\n        return `<img${buildCommonAttrs(node)}${sanitizedSrc ? ` src=\"${sanitizedSrc}\"` : ''} />${sanitizeHTML(next(node.children))}`\n    },\n    [NodeType.EMBED]:(node: Node, next: Next) => {\n        const src = getAttrString(node, 'src') || getAttrString(node, 'url');\n        const sanitizedSrc = src ? encodeURI(sanitizeHTML(src)) : '';\n        return `<iframe${buildCommonAttrs(node)}${sanitizedSrc ? ` src=\"${sanitizedSrc}\"` : ''}>${sanitizeHTML(next(node.children))}</iframe>`\n    },\n    [NodeType.HEADING_1]:(node: Node, next: Next) => {\n        return `<h1${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</h1>`\n    },\n    [NodeType.HEADING_2]:(node: Node, next: Next) => {\n        return `<h2${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</h2>`\n    },\n    [NodeType.HEADING_3]:(node: Node, next: Next) => {\n        return `<h3${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</h3>`\n    },\n    [NodeType.HEADING_4]:(node: Node, next: Next) => {\n        return `<h4${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</h4>`\n    },\n    [NodeType.HEADING_5]:(node: Node, next: Next) => {\n        return `<h5${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</h5>`\n    },\n    [NodeType.HEADING_6]:(node: Node, next: Next) => {\n        return `<h6${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</h6>`\n    },\n    [NodeType.ORDER_LIST]:(node: Node, next: Next) => {\n        return `<ol${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</ol>`\n    },\n    [NodeType.FRAGMENT]:(node: Node, next: Next) => {\n        return `<fragment>${sanitizeHTML(next(node.children))}</fragment>`\n    },\n    [NodeType.UNORDER_LIST]:(node: Node, next: Next) => {\n        return `<ul${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</ul>`\n    },\n    [NodeType.LIST_ITEM]:(node: Node, next: Next) => {\n        return `<li${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</li>`\n    },\n    [NodeType.HR]:() => {\n        return `<hr>`\n    },\n    [NodeType.TABLE]: (node: Node, next: Next) => {\n        // Generate colgroup if colWidths attribute is present\n        let colgroupHTML = '';\n        const colWidths = getAttr(node, 'colWidths');\n        if (colWidths && Array.isArray(colWidths)) {\n            const totalWidth = colWidths.reduce((sum: number, width: number) => sum + width, 0);\n            colgroupHTML = `<${NodeType.COL_GROUP} data-width=\"${totalWidth}\">`;\n            colWidths.forEach((colWidth: number) => {\n                const widthPercentage = (colWidth / totalWidth) * 100;\n                colgroupHTML += `<${NodeType.COL} style=\"width:${widthPercentage.toFixed(2)}%\"/>`;\n            });\n            colgroupHTML += `</${NodeType.COL_GROUP}>`;\n        }\n    \n        // Generate table with colgroup and other attributes\n        return `<table${buildCommonAttrs(node)}>${colgroupHTML}${sanitizeHTML(next(node.children))}</table>`;\n    },\n    [NodeType.TABLE_HEADER]:(node: Node, next: Next) => {\n        return `<thead${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</thead>`\n    },\n    [NodeType.TABLE_BODY]:(node: Node, next: Next) => {\n        return `<tbody${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</tbody>`\n    },\n    [NodeType.TABLE_FOOTER]:(node: Node, next: Next) => {\n        return `<tfoot${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</tfoot>`\n    },\n    [NodeType.TABLE_ROW]:(node: Node, next: Next) => {\n        return `<tr${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</tr>`\n    },\n    [NodeType.TABLE_HEAD]:(node: Node, next: Next) => {\n        if (getAttr(node, 'void')) return '';\n\n        const rowSpan = getAttr(node, 'rowSpan');\n        const colSpan = getAttr(node, 'colSpan');\n        const rowSpanAttr = rowSpan ? ` rowspan=\"${rowSpan}\"` : '';\n        const colSpanAttr = colSpan ? ` colspan=\"${colSpan}\"` : '';\n        \n        return `<th${rowSpanAttr}${colSpanAttr}${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</th>`\n    },\n    [NodeType.TABLE_DATA]:(node: Node, next: Next) => {\n        if (getAttr(node, 'void')) return '';\n\n        const rowSpan = getAttr(node, 'rowSpan');\n        const colSpan = getAttr(node, 'colSpan');\n        const rowSpanAttr = rowSpan ? ` rowspan=\"${rowSpan}\"` : '';\n        const colSpanAttr = colSpan ? ` colspan=\"${colSpan}\"` : '';\n        \n        return `<td${rowSpanAttr}${colSpanAttr}${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</td>`\n    },\n    [NodeType.BLOCK_QUOTE]:(node: Node, next: Next) => {\n        return `<blockquote${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</blockquote>`\n    },\n    [NodeType.CODE]:(node: Node, next: Next) => {\n        return `<code${buildCommonAttrs(node)}>${sanitizeHTML(next(node.children))}</code>`\n    },\n\n    ['reference']:(node: Node, next: Next) => {\n        const type = getAttr(node, 'type');\n        const displayType = getAttr(node, 'display-type');\n        \n        if ((type === 'entry' || type === 'asset') && displayType === 'link'){\n            const href = getAttrString(node, 'href') || getAttrString(node, 'url') || '';\n            const target = getAttrString(node, 'target');\n            const assetUid = getAttrString(node, 'asset-uid');\n            \n            let aTagAttrs = buildCommonAttrs(node);\n            if (href) aTagAttrs += ` href=\"${href}\"`;\n            if (target) {\n                aTagAttrs += ` target=\"${target}\"`;\n            }\n            if (type === 'asset') {\n                aTagAttrs += ` type=\"asset\" content-type-uid=\"sys_assets\"`;\n                if (assetUid) {\n                    aTagAttrs += ` data-sys-asset-uid=\"${assetUid}\"`;\n                }\n                aTagAttrs += ` sys-style-type=\"download\"`;\n            }\n            return `<a${aTagAttrs}>${sanitizeHTML(next(node.children))}</a>`;\n        }\n        \n        if (type === 'asset') {\n            const assetLink = getAttrString(node, 'asset-link');\n            const src = assetLink ? encodeURI(assetLink) : '';\n            const redactorAttrs = getAttr(node, 'redactor-attributes') as Record<string, unknown> | undefined;\n            const alt = redactorAttrs?.['alt'] as string | undefined;\n            const link = getAttrString(node, 'link');\n            const target = getAttrString(node, 'target') || \"\";\n            const caption = (redactorAttrs?.['asset-caption'] as string | undefined) || getAttrString(node, 'asset-caption') || \"\";\n            const style = getAttrString(node, 'style');\n            const assetUid = getAttrString(node, 'asset-uid');\n            const className = getAttrString(node, 'class-name');\n\n            const assetUidAttr = assetUid ? ` asset_uid=\"${assetUid}\"` : '';\n            const classAttr = className ? ` class=\"${sanitizeHTML(className)}\"` : '';\n            const srcAttr = src ? ` src=\"${sanitizeHTML(src)}\"` : '';\n            const altAttr = alt ? ` alt=\"${alt}\"` : '';\n            const targetAttr = target === \"_blank\" ? ` target=\"_blank\"` : '';\n            const styleAttr = style ? ` style=\"${style}\"` : '';\n            \n            const imageTag = `<img${assetUidAttr}${classAttr}${srcAttr}${altAttr}${targetAttr}${styleAttr} />`;\n            const styleAttrFig = style ? ` style=\"${style}\"` : '';\n\n            return `<figure${styleAttrFig}>` +\n                    (link ? `<a href=\"${link}\" target=\"${target || \"\"}\">` : \"\") +\n                    imageTag +\n                    (link ? `</a>` : \"\") +\n                    (caption ? `<figcaption>${caption}</figcaption>` : \"\") +\n                    `</figure>`;\n        }\n        return ``\n    },\n    ['default']:(node: Node, next: Next) => {\n        return sanitizeHTML(next(node.children))\n    },\n\n    [MarkType.BOLD]:(text: string) => {\n        return `<strong>${sanitizeHTML(text)}</strong>`\n    },\n    [MarkType.ITALIC]:(text: string) => {\n        return `<em>${sanitizeHTML(text)}</em>`\n    },\n    [MarkType.UNDERLINE]:(text: string) => {\n        return `<u>${sanitizeHTML(text)}</u>`\n    },\n    [MarkType.STRIKE_THROUGH]:(text: string) => {\n        return `<strike>${sanitizeHTML(text)}</strike>`\n    },\n    [MarkType.INLINE_CODE]:(text: string) => {\n        return `<span data-type='inlineCode'>${sanitizeHTML(text)}</span>`\n    },\n    [MarkType.SUBSCRIPT]:(text: string) => {\n        return `<sub>${sanitizeHTML(text)}</sub>`\n    },\n    [MarkType.SUPERSCRIPT]:(text: string) => {\n        return `<sup>${sanitizeHTML(text)}</sup>`\n    },\n    [MarkType.BREAK]:(text: string) => {\n        // Check if text is only newlines (which will be converted to <br /> by sanitizeHTML)\n        // If so, don't add an extra <br /> to avoid duplication\n        const onlyNewlines = /^\\n+$/.test(text);\n        if (onlyNewlines) {\n            return sanitizeHTML(text);\n        }\n        return `<br />${sanitizeHTML(text)}`\n    },\n    [MarkType.CLASSNAME_OR_ID]:(text: string, classname: string, id:string) => {\n        return `<span${classname ? ` class=\"${classname}\"` : ``}${id ? ` id=\"${id}\"` : ``}>${sanitizeHTML(text)}</span>`\n    }\n\n}\n","import { AnyNode } from '../json-to-html';\nimport { EmbeddedItem, EntryEmbedable } from '../Models/embedded-object';\nimport { Metadata, nodeToMetadata, styleObjType } from '../Models/metadata-model';\nimport MarkType from '../nodes/mark-type';\nimport TextNode from '../nodes/text-node';\nimport Node from '../nodes/node';\nimport Document from '../nodes/document';\nimport { Next, RenderMark, RenderNode, RenderOption } from '../options';\nimport { defaultNodeOption } from '../options/default-node-options';\nimport { findRenderString } from './find-embeded-object';\nimport { EntryNode } from '../Models/json-rte-model';\nimport { replaceHtmlEntities } from './string-utils';\n\nexport function enumerate(\n  entries: EntryEmbedable[] | EmbeddedItem[],\n  process: (entry: EntryEmbedable | EmbeddedItem) => void,\n) {\n  for (const entry of entries) {\n    process(entry);\n  }\n}\n\nexport function enumerateContents(\n  content: Document | Document[],\n  renderOption?: RenderOption,\n  renderEmbed?: (metadata: Metadata) => EmbeddedItem | EntryNode,\n): string | string[] {\n  if (!(content instanceof Array) && content.type !== 'doc') {\n    return content as unknown as string;\n  }\n  if (content instanceof Array) {\n    const result: string[] = [];\n    content.forEach((doc) => {\n      result.push(enumerateContents(doc, renderOption, renderEmbed) as string);\n    });\n    return result;\n  }\n  const commonRenderOption = {\n    ...defaultNodeOption,\n    ...renderOption,\n  };\n  return nodeChildrenToHTML(content.children, commonRenderOption, renderEmbed);\n}\n\nexport function textNodeToHTML(node: TextNode, renderOption: RenderOption): string {\n  let text = replaceHtmlEntities(node.text);\n  \n  // Convert newlines to <br /> tags if there are no other marks\n  // This ensures newlines are always handled consistently\n  let hasMarks = false;\n  \n  if (node.classname || node.id) {\n    text = (renderOption[MarkType.CLASSNAME_OR_ID] as RenderMark)(text, node.classname, node.id);\n    hasMarks = true;\n  }\n  if (node.break) {\n    text = (renderOption[MarkType.BREAK] as RenderMark)(text);\n    hasMarks = true;\n  }\n  if (node.superscript) {\n    text = (renderOption[MarkType.SUPERSCRIPT] as RenderMark)(text);\n    hasMarks = true;\n  }\n  if (node.subscript) {\n    text = (renderOption[MarkType.SUBSCRIPT] as RenderMark)(text);\n    hasMarks = true;\n  }\n  if (node.inlineCode) {\n    text = (renderOption[MarkType.INLINE_CODE] as RenderMark)(text);\n    hasMarks = true;\n  }\n  if (node.strikethrough) {\n    text = (renderOption[MarkType.STRIKE_THROUGH] as RenderMark)(text);\n    hasMarks = true;\n  }\n  if (node.underline) {\n    text = (renderOption[MarkType.UNDERLINE] as RenderMark)(text);\n    hasMarks = true;\n  }\n  if (node.italic) {\n    text = (renderOption[MarkType.ITALIC] as RenderMark)(text);\n    hasMarks = true;\n  }\n  if (node.bold) {\n    text = (renderOption[MarkType.BOLD] as RenderMark)(text);\n    hasMarks = true;\n  }\n  \n  // If no marks were applied, but text contains newlines, convert them to <br />\n  if (!hasMarks && text.includes('\\n')) {\n    text = text.replace(/\\n/g, '<br />');\n  }\n  \n  return text;\n}\nexport function referenceToHTML(\n  node: Node,\n  renderOption: RenderOption,\n  renderEmbed?: (metadata: Metadata) => EmbeddedItem | EntryNode,\n): string {\n\n  function sendToRenderOption(referenceNode: Node): string {\n    const next: Next = (nodes) => nodeChildrenToHTML(nodes, renderOption, renderEmbed);\n    return (renderOption[referenceNode.type] as RenderNode)(referenceNode, next);\n  }\n\n  if ((node.attrs.type === 'entry' || node.attrs.type === 'asset') && node.attrs['display-type'] === 'link') {\n    const entryText = node.children ? nodeChildrenToHTML(node.children, renderOption, renderEmbed) : '';\n    if (renderOption[node.type] !== undefined) {\n      return sendToRenderOption(node);\n    }\n\n    const href = node.attrs.href || node.attrs.url;\n    let aTagAttrs = `${node.attrs.style ? ` style=\"${node.attrs.style}\"` : ``}${node.attrs['class-name'] ? ` class=\"${node.attrs['class-name']}\"` : ``}${node.attrs.id ? ` id=\"${node.attrs.id}\"` : ``}${href ? ` href=\"${href}\"` : ``}`;\n    if (node.attrs.target) {\n      aTagAttrs +=` target=\"${node.attrs.target}\"`;\n    }\n    if(node.attrs.type == 'asset') {\n      aTagAttrs += ` type=\"asset\" content-type-uid=\"sys_assets\" ${node.attrs['asset-uid'] ? `data-sys-asset-uid=\"${node.attrs['asset-uid']}\"` : ``} sys-style-type=\"download\"`\n    }\n    const aTag = `<a${aTagAttrs}>${entryText}</a>`;\n    return aTag;\n  }\n \n  if (!renderEmbed && renderOption[node.type] !== undefined) {\n    return sendToRenderOption(node);\n  }\n  if (!renderEmbed) {\n    return '';\n  }\n  const metadata = nodeToMetadata(\n    node.attrs,\n    (node.children && node.children.length > 0 ? node.children[0] : {}) as unknown as TextNode,\n  );\n  const item = renderEmbed(metadata);\n  if (!item && renderOption[node.type] !== undefined) {\n    return sendToRenderOption(node);\n  }\n  \n  return findRenderString(item, metadata, renderOption);\n\n}\n\nfunction nodeChildrenToHTML(\n  nodes: AnyNode[],\n  renderOption: RenderOption,\n  renderEmbed?: (metadata: Metadata) => EmbeddedItem | EntryNode,\n): string {\n  return nodes.map<string>((node: AnyNode) => nodeToHTML(node, renderOption, renderEmbed)).join('');\n}\n\nfunction styleObjectToString(styleObj: styleObjType): string {\n  if (!styleObj) return '';\n  if (typeof styleObj === 'string') {\n    return styleObj;\n  }\n  let styleString: string = '';\n  for (const key in styleObj) {\n    if (styleObj.hasOwnProperty(key)) {\n      const value = styleObj[key];\n      styleString += `${key}:${value};`;\n    }\n  }\n  return styleString;\n}\n\nfunction nodeToHTML(\n  node: AnyNode,\n  renderOption: RenderOption,\n  renderEmbed?: (metadata: Metadata) => EmbeddedItem | EntryNode,\n): string {\n  if (node?.attrs?.style) {\n    node.attrs.style = styleObjectToString(node.attrs.style as styleObjType);\n  }\n  if (!node.type) {\n    return textNodeToHTML(node as TextNode, renderOption);\n  } else if ((node.type as string) === 'reference') {\n    return referenceToHTML(node, renderOption, renderEmbed);\n  } else {\n    const next: Next = (nodes) => nodeChildrenToHTML(nodes, renderOption, renderEmbed);\n    if (renderOption[node.type] !== undefined) {\n      return (renderOption[node.type] as RenderNode)(node, next);\n    } else {\n      return (renderOption.default as RenderNode)(node, next);\n    }\n  }\n}","import Node from './nodes/node';\nimport TextNode from './nodes/text-node';\nimport Document from './nodes/document';\nimport { Metadata } from './Models/metadata-model';\nimport { EntryEmbedable } from './Models/embedded-object';\nimport { findRenderContent } from './helper/find-render-content';\nimport { RenderOption } from './options';\nimport { findEmbeddedItems } from './helper/find-embeded-object';\nimport { enumerate, enumerateContents } from './helper/enumerate-entries';\n\nexport type AnyNode = TextNode | Node;\n\nexport function jsonToHTML(option: { \n    entry: EntryEmbedable| EntryEmbedable[],\n    paths: string[],\n    renderOption?: RenderOption,\n}) {\n    if (option.entry instanceof Array) {\n        enumerate(option.entry, (entry: EntryEmbedable) => {\n            jsonToHTML({entry, paths: option.paths, renderOption: option.renderOption})\n        })\n    } else {\n        enumerateKeys({\n            entry: option.entry,\n            paths: option.paths,\n            renderOption: option.renderOption,\n        })\n    }\n}\n\nfunction enumerateKeys(option: { \n    entry: EntryEmbedable,\n    paths: string[],\n    renderOption?: RenderOption,\n}) {\n    for (const key of option.paths) {\n        findRenderContent(\n            key, \n            option.entry, \n            ((content: Document | Document[]) => {\n                return enumerateContents(\n                    content, \n                    option.renderOption, \n                    (metadata: Metadata) => {\n                        return findEmbeddedItems(metadata, option.entry)[0]\n                    }\n                )\n            })\n        )\n    }\n}\n","import Node from './nodes/node';\nimport TextNode from './nodes/text-node';\nimport { RenderOption } from './options';\nimport { JsonRTE } from './Models/json-rte-model';\nimport { Metadata } from './Models/metadata-model';\nimport { findRenderContent } from './helper/find-render-content';\nimport { findGQLEmbeddedItems } from './helper/find-embeded-object';\nimport { EmbeddedItem, EntryEmbedable } from './Models/embedded-object';\nimport { enumerate, enumerateContents } from './helper/enumerate-entries';\n\nexport type AnyNode = TextNode | Node;\n\nfunction jsonToHTML(option: { \n    entry: EmbeddedItem| EmbeddedItem[],\n    paths: string[],\n    renderOption?: RenderOption,\n}) {\n    if (option.entry instanceof Array) {\n        enumerate(option.entry, (entry: EmbeddedItem) => {\n            jsonToHTML({entry, paths: option.paths, renderOption: option.renderOption})\n        })\n    } else {\n        enumerateKeys({\n            entry: option.entry,\n            paths: option.paths,\n            renderOption: option.renderOption,\n        })\n    }\n}\n\nfunction enumerateKeys(option: { \n    entry: EntryEmbedable,\n    paths: string[],\n    renderOption?: RenderOption,\n}) {\n    for (const key of option.paths) {\n        findRenderContent(key, \n            option.entry, \n            ((content: JsonRTE) => {\n            if (content && content.json) {\n                const edges = content.embedded_itemsConnection ? content.embedded_itemsConnection.edges : []\n                const items = Object.values(edges || []).reduce((accumulator, value) => accumulator.concat(value.node), [])\n                return enumerateContents(content.json, option.renderOption, (metadata: Metadata) => {\n                    return findGQLEmbeddedItems(metadata, items)[0]\n                })\n            }   \n            return content as unknown as string\n        }))\n    }\n}\nexport const GQL = {\n    jsonToHTML\n}","import { EntryModel } from \".\"\n\ninterface AppliedVariants {\n    _applied_variants: { [key: string]: any }\n    shouldApplyVariant: boolean\n    metaKey: string\n}\n\nexport function addTags(entry: EntryModel, contentTypeUid: string, tagsAsObject: boolean, locale: string = 'en-us'): void {\n    if (entry) {\n        // handle case senstivity for contentTypeUid and locale\n        contentTypeUid = contentTypeUid.toLowerCase();\n        locale = locale.toLowerCase();\n        \n        const appliedVariants = entry._applied_variants || entry?.system?.applied_variants || null;\n        entry.$ = getTag(entry, `${contentTypeUid}.${entry.uid}.${locale}`, tagsAsObject, locale, { _applied_variants: appliedVariants, shouldApplyVariant: !!appliedVariants, metaKey: '' })\n    }\n}\n\nfunction getTag(content: object, prefix: string, tagsAsObject: boolean, locale: string, appliedVariants: AppliedVariants): object {\n    const tags: any = {}\n    const { metaKey, shouldApplyVariant, _applied_variants } = appliedVariants\n    Object.entries(content).forEach(([key, value]) => {\n        if (key === '$') return\n        let metaUID = value && typeof value === 'object' && value !== null && value._metadata && value._metadata.uid ? value._metadata.uid : '';\n        let updatedMetakey = appliedVariants.shouldApplyVariant ? `${appliedVariants.metaKey ? appliedVariants.metaKey + '.' : ''}${key}` : '';\n        if (metaUID && updatedMetakey) updatedMetakey = updatedMetakey + '.' + metaUID;\n        switch (typeof value) {\n            case \"object\":\n                if (Array.isArray(value)) {\n                    value.forEach((obj, index) => {\n                        if (obj === null || obj === undefined) {\n                            return;\n                        }\n                        const childKey = `${key}__${index}`\n                        const parentKey = `${key}__parent`\n                        metaUID = value && typeof value === 'object' && obj !== null && obj._metadata && obj._metadata.uid ? obj._metadata.uid : '';\n                        updatedMetakey = appliedVariants.shouldApplyVariant ? `${appliedVariants.metaKey ? appliedVariants.metaKey + '.' : ''}${key}` : '';\n                        if (metaUID && updatedMetakey) updatedMetakey = updatedMetakey + '.' + metaUID;\n                        /**\n                         * Indexes of array are handled here\n                         * {\n                         *  \"array\": [\"hello\", \"world\"],\n                         *  \"$\": {\n                         *      \"array\": {\"data-cslp\": \"content_type_uid.entry_uid.locale.array\"}\n                         *      \"array__0\": {\"data-cslp\": \"content_type_uid.entry_uid.locale.array.0\"}\n                         *      \"array__1\": {\"data-cslp\": \"content_type_uid.entry_uid.locale.array.1\"}\n                         *  }\n                         * }\n                         */\n                        tags[childKey] = getTagsValue(`${prefix}.${key}.${index}`, tagsAsObject, { _applied_variants, shouldApplyVariant, metaKey: updatedMetakey })\n                        tags[parentKey] = getParentTagsValue(`${prefix}.${key}`, tagsAsObject)\n                        if (typeof obj !== 'undefined' && obj !== null && obj._content_type_uid !== undefined && obj.uid !== undefined) {\n                            /**\n                             * References are handled here\n                             * {\n                             *  \"reference\": [{\n                             *      \"title\": \"title\",\n                             *      \"uid\": \"ref_uid\",\n                             *      \"_content_type_uid\": \"ref_content_type_uid\",\n                             *     \"$\": {\"title\": {\"data-cslp\": \"ref_content_type_uid.ref_uid.locale.title\"}}\n                             *  }]\n                             * }\n                             */\n                            const newAppliedVariants = obj._applied_variants || obj?.system?.applied_variants || null //check for _applied_variants in the reference object only return null if not present , do not check in the parent object;\n                            const newShouldApplyVariant = !!newAppliedVariants\n                            value[index].$ = getTag(obj, `${obj._content_type_uid}.${obj.uid}.${obj.locale || locale}`, tagsAsObject, locale, { _applied_variants: newAppliedVariants, shouldApplyVariant: newShouldApplyVariant, metaKey: \"\" })\n                        } else if (typeof obj === \"object\") {\n                            /**\n                             * Objects inside Array like modular blocks are handled here\n                             * {\n                             *  \"array\": [{\n                             *    \"title\": \"title\",\n                             *    \"$\": {\"title\": {\"data-cslp\": \"content_type_uid.entry_uid.locale.array.0.title\"}}\n                             *  }]\n                             * }\n                             */\n                            obj.$ = getTag(obj, `${prefix}.${key}.${index}`, tagsAsObject, locale, { _applied_variants, shouldApplyVariant, metaKey: updatedMetakey })\n                        }\n                    })\n                } else {\n                    if (value) {\n                        /**\n                         * Objects are handled here\n                         * {\n                         *  \"object\": {\n                         *      \"title\": \"title\",\n                         *      \"$\": {\n                         *          \"title\": {\"data-cslp\": \"content_type_uid.entry_uid.locale.object.title\"}\n                         *      }\n                         *  },\n                         * }\n                         */\n                        value.$ = getTag(value, `${prefix}.${key}`, tagsAsObject, locale, { _applied_variants, shouldApplyVariant, metaKey: updatedMetakey })\n                    }\n                }\n                /**\n                 * {\n                 *  \"object\": {\n                 *      \"title\": \"title\",\n                 *  },\n                 *  \"array\": [\"hello\", \"world\"]\n                 *  \"$\": {\n                 *      \"object\": {\"data-cslp\": \"content_type_uid.entry_uid.locale.object\"},\n                 *      \"array\": {\"data-cslp\": \"content_type_uid.entry_uid.locale.array\"}\n                 *  }\n                 * }\n                 */\n\n                tags[key] = getTagsValue(`${prefix}.${key}`, tagsAsObject, { _applied_variants, shouldApplyVariant, metaKey: updatedMetakey })\n                break;\n            default:\n                /**\n                 * All primitive values are handled here\n                 * {\n                 *  \"title\": \"title\",\n                 *  \"$\": {title: {\"data-cslp\": \"content_type_uid.entry_uid.locale.title\"}}\n                 * }\n                 */\n                tags[key] = getTagsValue(`${prefix}.${key}`, tagsAsObject, { _applied_variants, shouldApplyVariant, metaKey: updatedMetakey })\n        }\n    })\n    return tags\n}\n\nfunction getTagsValue(dataValue: string, tagsAsObject: boolean, appliedVariants: { _applied_variants: { [key: string]: any }, shouldApplyVariant: boolean, metaKey: string }): any {\n    if (appliedVariants.shouldApplyVariant && appliedVariants._applied_variants) {\n      const isFieldVariantised = appliedVariants._applied_variants[appliedVariants.metaKey];\n      if(isFieldVariantised) {\n        const variant = appliedVariants._applied_variants[appliedVariants.metaKey]\n        // Adding v2 prefix to the cslp tag. New cslp tags are in v2 format. ex: v2:content_type_uid.entry_uid.locale.title\n        const newDataValueArray = ('v2:' + dataValue).split('.');\n        newDataValueArray[1] = newDataValueArray[1] + '_' + variant;\n        dataValue = newDataValueArray.join('.');\n      }\n      else {\n        const parentVariantisedPath = getParentVariantisedPath(appliedVariants);\n        if(parentVariantisedPath) {\n          const variant = appliedVariants._applied_variants[parentVariantisedPath];\n          const newDataValueArray = ('v2:' + dataValue).split('.');\n          newDataValueArray[1] = newDataValueArray[1] + '_' + variant;\n          dataValue = newDataValueArray.join('.');\n        }\n      }\n    }\n    if (tagsAsObject) {\n        return { \"data-cslp\": dataValue };\n    } else {\n        return `data-cslp=${dataValue}`;\n    }\n}\n\nfunction getParentTagsValue(dataValue: string, tagsAsObject: boolean): any {\n    if (tagsAsObject) {\n        return { \"data-cslp-parent-field\": dataValue };\n    } else {\n        return `data-cslp-parent-field=${dataValue}`;\n    }\n}\n\nfunction getParentVariantisedPath(appliedVariants: AppliedVariants) {\n    try {\n        // Safety fallback\n        if(!appliedVariants._applied_variants) return '';\n        const variantisedFieldPaths = Object.keys(appliedVariants._applied_variants).sort((a, b) => {\n            return b.length - a.length;\n        });\n        const childPathFragments = appliedVariants.metaKey.split('.');\n        // Safety fallback\n        if(childPathFragments.length === 0 || variantisedFieldPaths.length === 0) return '';\n        const parentVariantisedPath = variantisedFieldPaths.find(path => {\n            const parentFragments = path.split('.');\n            if(parentFragments.length > childPathFragments.length) return false;\n            return parentFragments.every((fragment, index) => childPathFragments[index] === fragment);\n        }) ?? '';\n        return parentVariantisedPath;\n    }\n    catch(e) {\n        return '';\n    }\n}","export function updateAssetURLForGQL(gqlResponse:any) {\n  try {\n    const response = gqlResponse?.data;\n    for (let contentType in response) {\n      if (\"items\" in response[contentType]) {\n        const entries = response[contentType].items;\n\n        entries.forEach((entry:any) => {              // iterate over all entries\n          processEntry(entry);\n        });\n      } else { \n        processEntry(response[contentType]);        \n       }\n    }\n  } catch (error) {\n    console.error('Error in updating asset URL for GQL response', error);\n  }\n}\n\nfunction processEntry(entry:any) {\n  for (let field in entry) {\n    const fieldData = entry[field];\n    if (fieldData instanceof Array) {\n      fieldData.forEach((data:any) => {\n        findRTEFieldAndUpdateURL(data);\n      });\n    } else if (fieldData && typeof fieldData === 'object') {\n      findRTEFieldAndUpdateURL(fieldData);\n    }\n  }\n}\n\nfunction findRTEFieldAndUpdateURL(fieldData:any) {\n  const rteField = findRTEField(fieldData);\n\n  if (!rteField) return;\n\n  const edges = rteField?.embedded_itemsConnection?.edges;\n  edges.forEach((edge:any) => {\n    const node = edge.node;\n    if (node?.url && node?.filename) {\n      \n      if (!node?.system?.uid) throw new Error('Asset UID not found in the response');\n\n      const correspondingAsset = rteField?.json?.children?.find((child:any) => child.attrs['asset-uid'] === node.system.uid);\n      correspondingAsset.attrs['asset-link'] = node.url;\n    }\n  });\n}\n\nfunction findRTEField(fieldData: any): any {\n  if (fieldData && fieldData.embedded_itemsConnection) {\n    return fieldData;\n  }\n  for (const key in fieldData) {\n    if (fieldData[key] && typeof fieldData[key] === 'object') {\n      const found = findRTEField(fieldData[key]);\n      if (found) {\n        return found;\n      }\n    }\n  }\n}","import regionsData from './assets/regions.json';\n\nexport interface ContentstackEndpoints {\n  [key: string]: string | ContentstackEndpoints;\n}\n\nexport interface RegionData {\n  id: string;\n  name: string;\n  cloudProvider: string;\n  location: string;\n  alias: string[];\n  isDefault: boolean;\n  endpoints: ContentstackEndpoints;\n}\n\nexport interface RegionsResponse {\n  regions: RegionData[];\n}\n\nexport function getContentstackEndpoint(region: string = 'us', service: string = '', omitHttps: boolean = false): string | ContentstackEndpoints {\n  // Validate empty region before any processing\n  if (region === '') {\n    throw new Error('Empty region provided. Please put valid region.');\n  }\n\n  const regions: RegionsResponse = regionsData as RegionsResponse;\n\n  // Normalize the region input\n  const normalizedRegion = region.toLowerCase().trim() || 'us';\n\n  // Check if regions data is malformed\n  if (!Array.isArray(regions.regions)) {\n    throw new Error('Invalid Regions file. Please install the SDK again to fix this issue.');\n  }\n\n  // Find the region by ID or alias\n  const regionData = findRegionByIDOrAlias(regions.regions, normalizedRegion);\n\n  if (!regionData) {\n    throw new Error(`Invalid region: ${region}`);\n  }\n\n  // Get the endpoint(s)\n  if (service) {\n    // Return specific service endpoint\n    const endpoint = regionData.endpoints[service];\n\n    if (!endpoint) {\n      throw new Error(`Service \"${service}\" not found for region \"${regionData.id}\"`);\n    }\n    return omitHttps ? stripHttps(endpoint) : endpoint;\n  } else {\n    return omitHttps ? stripHttps(regionData.endpoints) : regionData.endpoints;\n  }\n}\n\nfunction findRegionByIDOrAlias(regions: RegionData[], regionInput: string): RegionData | null {\n  // First try to find by exact ID match\n  let region = regions.find(r => r.id === regionInput);\n  if (region) {\n    return region;\n  }\n\n  // Then try to find by alias\n  region = regions.find(r =>\n    r.alias.some(alias => alias.toLowerCase() === regionInput.toLowerCase())\n  );\n\n  return region || null;\n}\n\nfunction stripHttps(endpoint: string | ContentstackEndpoints): string | ContentstackEndpoints {\n  if (typeof endpoint === 'string') {\n    return endpoint.replace(/^https?:\\/\\//, '');\n  } else {\n    const result: ContentstackEndpoints = {};\n    for (const key in endpoint) {\n      result[key] = stripHttps(endpoint[key]);\n    }\n    return result;\n  }\n}"],"names":["_a","StyleType","NodeType","MarkType","jsonToHTML","enumerateKeys"],"mappings":"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"}