{"version":3,"sources":["../../../src/lib/pagination.ts"],"sourcesContent":["import { PaginationObj, queryParams } from './types';\n\nexport class Pagination {\n  _queryParams: queryParams = {};\n  /**\n   * @method constructor\n   * @memberof Pagination\n   * @description Create a pagination class object to paginate through the query response\n   * @param {BaseQuery} object of class BaseQuery\n   * @param {PaginationObj} object to send skip and limit values\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   *\n   * interface TEntryProps {\n   *   uid: string;\n   *   title: string;\n   *   created_at: string;\n   *   _version: number;\n   *   locale: string;\n   *   created_by: string;\n   *   url: string;\n   *   // other props\n   * }\n   * interface TEntries {\n   *   entries: TEntryProps[];\n   * }\n   * const pagedResult = await query.paginate().find<TEntries>();\n   * OR\n   * const pageObj = await query.paginate({ skip: 10, limit: 20 }).find<TEntries>();\n   * @returns {Pagination}\n   */\n  paginate(paginationObj?: PaginationObj) {\n    this._queryParams.skip = paginationObj?.skip || 0;\n    this._queryParams.limit = paginationObj?.limit || 10;\n\n    return this;\n  }\n\n  /**\n   * @method next\n   * @memberof Pagination\n   * @description Go to next set of response values - skips the current num of responses and shows next responses\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   *\n   * interface TEntryProps {\n   *   uid: string;\n   *   title: string;\n   *   created_at: string;\n   *   _version: number;\n   *   locale: string;\n   *   created_by: string;\n   *   url: string;\n   *   // other props\n   * }\n   * interface TEntries {\n   *   entries: TEntryProps[];\n   * }\n   * const pagedResult = await query.paginate().find<TEntries>();\n   * const nextPageResult = await query.next().find<TEntries>();\n   * @returns {Object}\n   */\n  next() {\n    if (!this._queryParams.skip) this.paginate();\n\n    (this._queryParams.skip as number) += this._queryParams.limit as number;\n\n    return this;\n  }\n\n  /**\n   * @method previous\n   * @memberof Pagination\n   * @description Go to previous set of response values - skips the current num of responses and shows previous responses\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   *\n   * interface TEntryProps {\n   *   uid: string;\n   *   title: string;\n   *   created_at: string;\n   *   _version: number;\n   *   locale: string;\n   *   created_by: string;\n   *   url: string;\n   *   // other props\n   * }\n   * interface TEntries {\n   *   entries: TEntryProps[];\n   * }\n   * const pagedResult = await query.paginate().find<TEntries>();\n   * const prevPageResult = await query.previous().find<TEntries>();\n   * @returns {Pagination}\n   */\n  previous() {\n    if (!this._queryParams.skip) this.paginate();\n\n    const skipVal = (this._queryParams.skip as number) - (this._queryParams.limit as number);\n    this._queryParams.skip = skipVal < 0 ? 0 : skipVal;\n\n    return this;\n  }\n}\n"],"mappings":";AAEO,IAAM,aAAN,MAAiB;AAAA,EAAjB;AACL,wBAA4B,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA+B7B,SAAS,eAA+B;AACtC,SAAK,aAAa,OAAO,eAAe,QAAQ;AAChD,SAAK,aAAa,QAAQ,eAAe,SAAS;AAElD,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA6BA,OAAO;AACL,QAAI,CAAC,KAAK,aAAa,KAAM,MAAK,SAAS;AAE3C,IAAC,KAAK,aAAa,QAAmB,KAAK,aAAa;AAExD,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA6BA,WAAW;AACT,QAAI,CAAC,KAAK,aAAa,KAAM,MAAK,SAAS;AAE3C,UAAM,UAAW,KAAK,aAAa,OAAmB,KAAK,aAAa;AACxE,SAAK,aAAa,OAAO,UAAU,IAAI,IAAI;AAE3C,WAAO;AAAA,EACT;AACF;","names":[]}