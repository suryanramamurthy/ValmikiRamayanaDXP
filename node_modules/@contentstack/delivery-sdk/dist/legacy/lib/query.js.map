{"version":3,"sources":["../../../src/lib/query.ts"],"sourcesContent":["import { AxiosInstance, getData } from '@contentstack/core';\nimport { BaseQuery } from './base-query';\nimport { BaseQueryParameters, QueryOperation, QueryOperator, TaxonomyQueryOperation, params, queryParams, FindResponse } from './types';\nimport { encodeQueryParams } from './utils';\nimport { ErrorMessages } from './error-messages';\n\nexport class Query extends BaseQuery {\n  private _contentTypeUid?: string;\n\n  constructor(client: AxiosInstance, params: params, queryParams: queryParams, variants?: string, uid?: string, queryObj?: { [key: string]: any }) {\n    super();\n    this._client = client;\n    this._contentTypeUid = uid;\n    this._urlPath = `/content_types/${this._contentTypeUid}/entries`;\n    this._parameters = params || {};\n    this._queryParams = queryParams || {};\n    this._variants = variants || '';\n\n    if (!uid) {\n      this._urlPath = `/assets`;\n    }\n    if (queryObj) {\n      this._parameters = { ...this._parameters, ...queryObj };\n    }\n  }\n  // Validate if input is alphanumeric \n  private isValidAlphanumeric(input: string): boolean {\n    const alphanumericRegex = /^[a-zA-Z0-9_.-]+$/;\n    return alphanumericRegex.test(input);\n  }\n\n  // Validate if input matches any of the safe, pre-approved patterns\n  private isValidRegexPattern(input: string): boolean {\n    const validRegex = /^[a-zA-Z0-9|^$.*+?()[\\]{}\\\\-]+$/; // Allow only safe regex characters\n    if (!validRegex.test(input)) {\n        return false;\n    }\n    try {\n        new RegExp(input);\n        return true;\n    } catch (e) {\n        return false;\n    }\n  }\n\n  private isValidValue(value: any[]): boolean {\n    return Array.isArray(value) && value.every(item => typeof item === 'string' || typeof item === 'number' || typeof item === 'boolean');\n  }\n\n  /**\n   * @method where\n   * @memberof Query\n   * @description Filters the results based on the specified criteria.\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const result = await query.where(\"field_UID\", QueryOperation.IS_LESS_THAN, [\"field1\", \"field2\"]).find()\n   * // OR\n   * const asset = await stack.asset().query().where(\"field_UID\", QueryOperation.IS_LESS_THAN, [\"field1\", \"field2\"]).find()\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const result = await query.where(\"field_UID\", QueryOperation.MATCHES, [\"field1\", \"field2\"]).find()\n   * @returns {Query}\n   */\n  where(\n    fieldUid: string,\n    queryOperation: QueryOperation | TaxonomyQueryOperation,\n    fields: string | string[] | number | number[] | object | boolean,\n    additionalData?: object\n  ): Query {\n    if (!this.isValidAlphanumeric(fieldUid)) {\n      console.error(ErrorMessages.INVALID_FIELD_UID);\n      return this;\n    }\n    if (queryOperation == QueryOperation.EQUALS) {\n      this._parameters[fieldUid] = fields;\n    }\n    else {\n      const parameterValue: { [key in QueryOperation]?: string | string[] } = { [queryOperation]: fields, ...additionalData };\n      this._parameters[fieldUid] = parameterValue;\n    }\n    return this;\n  }\n\n  /**\n   * @method regex\n   * @memberof Query\n   * @description Retrieve entries that match the provided regular expressions\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const result = await query.regex('title','^Demo').find()\n   * // OR\n   * const result = await query.regex('title','^Demo', 'i').find() // regex with options\n   * @returns {Query}\n   */\n  regex(fieldUid: string, regexPattern: string, options?: string): Query {\n    if (!this.isValidAlphanumeric(fieldUid)) {\n      console.error(ErrorMessages.INVALID_FIELD_UID);\n      return this;\n    }\n    if (!this.isValidRegexPattern(regexPattern)) {\n      throw new Error(ErrorMessages.INVALID_REGEX_PATTERN);\n    }\n    else {\n      this._parameters[fieldUid] = { $regex: regexPattern };\n      if (options) this._parameters[fieldUid].$options = options;\n      return this;\n    }\n  }\n\n  /**\n   * @method whereIn\n   * @memberof Query\n   * @description Get entries having values based on referenced fields.\n   * The query retrieves all entries that satisfy the query conditions made on referenced fields\n   * This method sets the '$in_query' parameter to a reference field UID and a query instance in the API request.\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const subQuery = stack.contentType(\"referencedContentTypeUid\").entry().query().where(\"title\", QueryOperation.EQUALS, \"value\");\n   * query.whereIn(\"brand\", subQuery)\n   * const result = await query.find()\n   *\n   * @param {string} referenceUid - UID of the reference field to query.\n   * @param {Query} queryInstance - The Query instance to include in the where clause.\n   * @returns {Query} - Returns the Query instance for chaining.\n   */\n  whereIn(referenceUid: string, queryInstance: Query): Query {\n    // eslint-disable-next-line @typescript-eslint/naming-convention, prettier/prettier\n    if (!this.isValidAlphanumeric(referenceUid)) {\n      throw new Error(ErrorMessages.INVALID_REFERENCE_UID(referenceUid));\n    }\n    this._parameters[referenceUid] = { '$in_query': queryInstance._parameters };\n    return this;\n  }\n\n  /**\n   * @method whereNotIn\n   * @memberof Query\n   * @description Get entries having values based on referenced fields.\n   * This query works the opposite of $in_query and retrieves all entries that does not satisfy query conditions made on referenced fields.\n   * This method sets the '$nin_query' parameter to a reference field UID and a query instance in the API request.\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const subQuery = stack.contentType(\"referencedContentTypeUid\").entry().query().where(\"title\", QueryOperation.EQUALS, \"value\");\n   * query.whereNotIn(\"brand\", subQuery)\n   * const result = await query.find()\n   *\n   * @param {string} referenceUid - UID of the reference field to query.\n   * @param {Query} queryInstance - The Query instance to include in the where clause.\n   * @returns {Query} - Returns the Query instance for chaining.\n   */\n  whereNotIn(referenceUid: string, queryInstance: Query): Query {\n    // eslint-disable-next-line @typescript-eslint/naming-convention, prettier/prettier\n    if (!this.isValidAlphanumeric(referenceUid)) {\n      throw new Error(ErrorMessages.INVALID_REFERENCE_UID(referenceUid));\n    }\n    this._parameters[referenceUid] = { '$nin_query': queryInstance._parameters };\n    return this;\n  }\n\n  /**\n   * @method queryOperator\n   * @memberof Query\n   * @description In case of '$and' get entries that satisfy all the conditions provided in the '$and' query and\n   * in case of '$or' query get all entries that satisfy at least one of the given conditions provided in the '$or' query.\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentType1Uid\").entry().query();\n   * const subQuery1 = stack.contentType(\"contentType2Uid\").entry().query().where(\"price\", QueryOperation.IS_LESS_THAN, 90);\n   * const subQuery2 = stack.contentType(\"contentType3Uid\").entry().query().where(\"discount\", QueryOperation.INCLUDES, [20, 45]);\n   * query.queryOperator(QueryOperator.AND, subQuery1, subQuery2)\n   * const result = await query.find()\n   *\n   * @param {QueryOperator} queryType - The type of query operator to apply.\n   * @param {...Query[]} queryObjects - The Query instances to apply the query to.\n   * @returns {Query} - Returns the Query instance for chaining.\n   */\n  queryOperator(queryType: QueryOperator, ...queryObjects: Query[]): Query {\n    const paramsList: BaseQueryParameters[] = [];\n    for (const queryItem of queryObjects) {\n      paramsList.push(queryItem._parameters);\n    }\n    this._parameters[queryType] = paramsList;\n\n    return this;\n  }\n\n  /**\n   * @method getQuery\n   * @memberof Query\n   * @description Returns the raw (JSON) query based on the filters applied on Query object.\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const result = query.getQuery()\n   * // OR\n   * const assetQuery = stack.asset().query();\n   * const assetResult = assetQuery.getQuery()\n   *\n   * @returns {{ [key: string]: any }} The raw query object\n   */\n  getQuery(): { [key: string]: any } {\n    return this._parameters;\n  }\n\n  /**\n   * @method containedIn\n   * @memberof Query\n   * @description Filters entries where the field value is contained in the provided array of values\n   * @param {string} key - The field UID to filter on\n   * @param {(string | number | boolean)[]} value - Array of values to match against\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const result = await query.containedIn('fieldUid', ['value1', 'value2']).find()\n   * \n   * @returns {Query}\n   */\n  containedIn(key: string, value: (string | number | boolean)[]): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    if (!this.isValidValue(value)) {\n      console.error(ErrorMessages.INVALID_VALUE_ARRAY);\n      return this;\n    }\n    this._parameters[key] = { '$in': value };\n    return this;\n  }\n\n  /**\n   * @method notContainedIn\n   * @memberof Query\n   * @description Filters entries where the field value is not contained in the provided array of values\n   * @param {string} key - The field UID to filter on\n   * @param {(string | number | boolean)[]} value - Array of values to exclude\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const result = await query.notContainedIn('fieldUid', ['value1', 'value2']).find()\n   * \n   * @returns {Query}\n   */\n  notContainedIn(key: string, value: (string | number | boolean)[]): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    if (!this.isValidValue(value)) {\n      console.error(ErrorMessages.INVALID_VALUE_ARRAY);\n      return this;\n    }\n    this._parameters[key] = { '$nin': value };\n    return this;\n  }\n\n  /**\n   * @method exists\n   * @memberof Query\n   * @description Filters entries where the specified field exists\n   * @param {string} key - The field UID to check for existence\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const result = await query.exists('fieldUid').find()\n   * \n   * @returns {Query}\n   */\n  exists(key: string): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    this._parameters[key] = { '$exists': true };\n    return this;\n  }\n\n  /**\n   * @method notExists\n   * @memberof Query\n   * @description Filters entries where the specified field does not exist\n   * @param {string} key - The field UID to check for non-existence\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query = stack.contentType(\"contentTypeUid\").entry().query();\n   * const result = await query.notExists('fieldUid').find()\n   * \n   * @returns {Query}\n   */\n  notExists(key: string): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    this._parameters[key] = { '$exists': false };\n    return this;\n  }\n\n  /**\n   * @method or\n   * @memberof Query\n   * @description Combines multiple queries with OR logic - returns entries that match at least one of the provided queries\n   * @param {...Query} queries - Query instances to combine with OR logic\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query1 = stack.contentType('contenttype_uid').entry().query().containedIn('fieldUID', ['value']);\n   * const query2 = stack.contentType('contenttype_uid').entry().query().where('fieldUID', QueryOperation.EQUALS, 'value2');\n   * const result = await stack.contentType('contenttype_uid').entry().query().or(query1, query2).find();\n   *  \n   * @returns {Query}\n   */\n  or(...queries: Query[]): Query {\n    const paramsList: BaseQueryParameters[] = [];\n    for (const queryItem of queries) {\n      paramsList.push(queryItem._parameters);\n    }\n    this._parameters.$or = paramsList;\n    return this;\n  }\n\n  /**\n   * @method and\n   * @memberof Query\n   * @description Combines multiple queries with AND logic - returns entries that match all of the provided queries\n   * @param {...Query} queries - Query instances to combine with AND logic\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const query1 = stack.contentType('contenttype_uid').entry().query().containedIn('fieldUID', ['value']);\n   * const query2 = stack.contentType('contenttype_uid').entry().query().where('fieldUID', QueryOperation.EQUALS, 'value2');\n   * const result = await stack.contentType('contenttype_uid').entry().query().and(query1, query2).find();\n   *  \n   * @returns {Query}\n   */\n  and(...queries: Query[]): Query {\n    const paramsList: BaseQueryParameters[] = [];\n    for (const queryItem of queries) {\n      paramsList.push(queryItem._parameters);\n    }\n    this._parameters.$and = paramsList;\n    return this;\n  }\n\n  /**\n   * @method equalTo\n   * @memberof Query\n   * @description Filters entries where the field value equals the specified value\n   * @param {string} key - The field UID to filter on\n   * @param {string | number | boolean} value - The value to match\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const result = await stack.contentType('contenttype_uid').entry().query().equalTo('fieldUid', 'value').find();\n   *  \n   * @returns {Query}\n   */\n  equalTo(key: string, value: string | number | boolean): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      console.error(ErrorMessages.INVALID_VALUE_STRING_OR_NUMBER);\n      return this;\n    }\n    this._parameters[key] = value;\n    return this;\n  }\n\n  /**\n   * @method notEqualTo\n   * @memberof Query\n   * @description Filters entries where the field value does not equal the specified value\n   * @param {string} key - The field UID to filter on\n   * @param {string | number | boolean} value - The value to exclude\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const result = await stack.contentType('contenttype_uid').entry().query().notEqualTo('fieldUid', 'value').find();\n   *  \n   * @returns {Query}\n   */\n  notEqualTo(key: string, value: string | number | boolean): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      console.error(ErrorMessages.INVALID_VALUE_STRING_OR_NUMBER);\n      return this;\n    }\n    this._parameters[key] = { '$ne': value };\n    return this;\n  }\n\n  /**\n   * @method referenceIn\n   * @memberof Query\n   * @description Filters entries where the reference field matches entries from the provided query\n   * @param {string} key - The reference field UID to filter on\n   * @param {Query} query - Query instance to match referenced entries against\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const subQuery = stack.contentType('contenttype_uid').entry().query().where('title', QueryOperation.EQUALS, 'value');\n   * const result = await stack.contentType('contenttype_uid').entry().query().referenceIn('reference_uid', subQuery).find();\n   *  \n   * @returns {Query}\n   */\n  referenceIn(key: string, query: Query): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    this._parameters[key] = { '$in_query': query._parameters }\n    return this;\n  }\n\n  /**\n   * @method referenceNotIn\n   * @memberof Query\n   * @description Filters entries where the reference field does not match entries from the provided query\n   * @param {string} key - The reference field UID to filter on\n   * @param {Query} query - Query instance to exclude referenced entries against\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const subQuery = stack.contentType('contenttype_uid').entry().query().where('title', QueryOperation.EQUALS, 'value');\n   * const result = await stack.contentType('contenttype_uid').entry().query().referenceNotIn('reference_uid', subQuery).find();\n   *  \n   * @returns {Query}\n   */\n  referenceNotIn(key: string, query: Query): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    this._parameters[key] = { '$nin_query': query._parameters }\n    return this;\n  }\n\n  /**\n   * @method tags\n   * @memberof Query\n   * @description Filters entries that have any of the specified tags\n   * @param {(string | number | boolean)[]} values - Array of tag values to filter by\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const result = await stack.contentType('contenttype_uid').entry().query().tags(['tag1']).find();\n   *  \n   * @returns {Query}\n   */\n  tags(values: (string | number | boolean)[]): Query {\n    if (!this.isValidValue(values)) {\n      console.error(ErrorMessages.INVALID_VALUE_ARRAY);\n      return this;\n    }\n    this._parameters['tags'] = values;\n    return this;\n  }\n\n  /**\n   * @method search\n   * @memberof Query\n   * @description Enables typeahead search functionality for the query\n   * @param {string} key - The search term to use for typeahead search\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const result = await stack.contentType('contenttype_uid').entry().query().search('key').find();\n   *  \n   * @returns {Query}\n   */\n  search(key: string): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    this._queryParams['typeahead'] = key\n    return this\n  }\n\n  /**\n   * @method lessThan\n   * @memberof Query\n   * @description Filters entries where the field value is less than the specified value\n   * @param {string} key - The field UID to filter on\n   * @param {string | number} value - The value to compare against\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const result = await stack.contentType('contenttype_uid').entry().query().lessThan('fieldUid', 100).find();\n   *  \n   * @returns {Query}\n   */\n  lessThan(key: string, value: (string | number)): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      console.error(ErrorMessages.INVALID_VALUE_STRING_OR_NUMBER);\n      return this;\n    }\n\n    this._parameters[key] = { '$lt': value };\n    return this;\n  }\n\n  /**\n   * @method lessThanOrEqualTo\n   * @memberof Query\n   * @description Filters entries where the field value is less than or equal to the specified value\n   * @param {string} key - The field UID to filter on\n   * @param {string | number} value - The value to compare against\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const result = await stack.contentType('contenttype_uid').entry().query().lessThanOrEqualTo('fieldUid', 100).find();\n   *  \n   * @returns {Query}\n   */\n  lessThanOrEqualTo(key: string, value: (string | number)): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      console.error(ErrorMessages.INVALID_VALUE_STRING_OR_NUMBER);\n      return this;\n    }\n    this._parameters[key] = { '$lte': value };\n    return this;\n  }\n\n  /**\n   * @method greaterThan\n   * @memberof Query\n   * @description Filters entries where the field value is greater than the specified value\n   * @param {string} key - The field UID to filter on\n   * @param {string | number} value - The value to compare against\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const result = await stack.contentType('contenttype_uid').entry().query().greaterThan('fieldUid', 100).find();\n   *  \n   * @returns {Query}\n   */\n  greaterThan(key: string, value: (string | number)): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      console.error(ErrorMessages.INVALID_VALUE_STRING_OR_NUMBER);\n      return this;\n    }\n    this._parameters[key] = { '$gt': value };\n    return this;\n  }\n\n  /**\n   * @method greaterThanOrEqualTo\n   * @memberof Query\n   * @description Filters entries where the field value is greater than or equal to the specified value\n   * @param {string} key - The field UID to filter on\n   * @param {string | number} value - The value to compare against\n   * @example\n   * import contentstack from '@contentstack/delivery-sdk'\n   *\n   * const stack = contentstack.stack({ apiKey: \"apiKey\", deliveryToken: \"deliveryToken\", environment: \"environment\" });\n   * const result = await stack.contentType('contenttype_uid').entry().query().greaterThanOrEqualTo('fieldUid', 100).find();\n   *  \n   * @returns {Query}\n   */\n  greaterThanOrEqualTo(key: string, value: (string | number)): Query {\n    if (!this.isValidAlphanumeric(key)) {\n      console.error(ErrorMessages.INVALID_KEY);\n      return this;\n    }\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      console.error(ErrorMessages.INVALID_VALUE_STRING_OR_NUMBER);\n      return this;\n    }\n    this._parameters[key] = { '$gte': value };\n    return this;\n  }\n\n  /**\n   * Override find method to include content type UID directly for better caching\n   */\n  override async find<T>(encode: boolean = false): Promise<FindResponse<T>> {\n    let requestParams: { [key: string]: any } = this._queryParams;\n\n    if (Object.keys(this._parameters).length > 0) {\n      let queryParams = { ...this._parameters };\n      \n      if (encode) {\n        queryParams = encodeQueryParams(queryParams);\n      }\n      \n      requestParams = { ...this._queryParams, query: queryParams };\n    }\n\n    const getRequestOptions: any = { \n      params: requestParams,\n      // Add contentTypeUid directly for improved caching\n      contentTypeUid: this._contentTypeUid\n    };\n\n    if (this._variants) {\n      getRequestOptions.headers = {\n        ...getRequestOptions.headers,\n        'x-cs-variant-uid': this._variants\n      };\n    }\n    const response = await getData(this._client, this._urlPath, getRequestOptions);\n\n    return response as FindResponse<T>;\n  }\n}\n"],"mappings":"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","names":["params","queryParams"]}