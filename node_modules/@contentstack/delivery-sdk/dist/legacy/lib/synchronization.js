// src/lib/synchronization.ts
import { getData } from "@contentstack/core";
import humps from "humps";
async function synchronization(client, params = {}, recursive = false) {
  const config = { params };
  const SYNC_URL = "/stacks/sync";
  if (!("paginationToken" in params || "syncToken" in params)) {
    config.params = { ...params, init: true };
  }
  if (params.type && typeof params.type !== "string") {
    const type = params.type;
    config.params = { ...config.params, type: type.join(",") };
  }
  let response = await getData(client, SYNC_URL, { params: humps.decamelizeKeys(config.params) });
  const data = response.data;
  while (recursive && "pagination_token" in response.data) {
    const recResponse = await getData(
      client,
      SYNC_URL,
      humps.decamelizeKeys({ paginationToken: data.pagination_token })
    );
    recResponse.data.items = { ...response.data.items, ...recResponse.data.items };
    response = { ...recResponse };
  }
  return response.data;
}
export {
  synchronization
};
//# sourceMappingURL=synchronization.js.map