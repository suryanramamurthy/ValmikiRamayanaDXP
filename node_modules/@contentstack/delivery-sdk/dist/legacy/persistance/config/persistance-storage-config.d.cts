import { Storage } from '../types/storage.cjs';
import { StorageType } from '../types/storage-type.cjs';
import '../helper/utils.cjs';

/**
 * Configuration type for persistence store
 * Can be either a custom storage with Store interface or standard storage with PersistanceStoreOptions
 */
type PersistanceStoreConfig = (Store & PersistanceStoreOptions) | ({
    storeType?: StorageType;
} & PersistanceStoreOptions);
/**
 * Interface for custom storage configuration
 */
interface Store {
    /** Custom storage implementation */
    storage: Storage;
    /** Storage type identifier */
    storeType: 'customStorage';
}
/**
 * Options for persistence store configuration
 */
interface PersistanceStoreOptions {
    /** Maximum age for cached items in milliseconds (default: 24 hours) */
    maxAge?: number;
    /** Serializer function for storing data (default: JSON.stringify) */
    serializer?: (content: any) => string;
    /** Deserializer function for retrieving data (default: JSON.parse) */
    deserializer?: (cacheString: string) => any;
}

export type { PersistanceStoreConfig, PersistanceStoreOptions, Store };
